# 弹窗与覆盖层

## 概述

弹窗与覆盖层组件用于在当前页面上层展示内容，包括模态框、抽屉、弹出层等。它们用于聚焦用户注意力、收集输入或展示详情。

## 设计原则

- **聚焦任务**：一次只处理一个任务
- **易于关闭**：提供明确的关闭方式
- **适度使用**：避免过度打断用户流程
- **层级清晰**：遮罩和阴影表达层级

## 模态框（Modal/Dialog）

### 尺寸

| 尺寸 | 宽度 | 适用场景 |
|------|------|----------|
| sm | 400px | 确认对话框 |
| md | 560px | 表单、详情 |
| lg | 800px | 复杂内容 |
| xl | 1000px | 大型表单 |
| full | 90vw | 全屏内容 |

### 结构

```
┌────────────────────────────────────────┐
│  标题                              ✕   │  ← 头部 (56-64px)
├────────────────────────────────────────┤
│                                        │
│              内容区域                   │  ← 主体 (可滚动)
│                                        │
├────────────────────────────────────────┤
│                    [ 取消 ] [ 确认 ]   │  ← 底部 (64-72px)
└────────────────────────────────────────┘
```

### 规范

| 元素 | 规范 |
|------|------|
| 圆角 | 12-16px |
| 阴影 | shadow-xl |
| 内边距 | 24px |
| 头部边框 | 1px Gray-200 |
| 底部边框 | 1px Gray-200 |
| 最大高度 | 90vh |

### 遮罩层

| 属性 | 值 |
|------|-----|
| 背景 | rgba(0,0,0,0.5) |
| z-index | z-50 |
| 点击关闭 | 可配置 |

### 动画

| 动作 | 动画 |
|------|------|
| 打开 | 淡入 + 缩放(0.95→1) |
| 关闭 | 淡出 + 缩放(1→0.95) |
| 时长 | 200-300ms |

## 抽屉（Drawer）

### 方向

| 方向 | 适用场景 |
|------|----------|
| 右侧 | 详情面板、编辑表单 |
| 左侧 | 导航菜单 |
| 底部 | 移动端操作面板 |
| 顶部 | 通知面板 |

### 尺寸

| 方向 | 尺寸 |
|------|------|
| 左/右 | 320px / 480px / 640px |
| 上/下 | 自适应内容，最大 80vh |

### 规范

| 元素 | 规范 |
|------|------|
| 阴影 | shadow-xl |
| 遮罩 | 同模态框 |
| 头部高度 | 56-64px |
| 内边距 | 24px |

### 动画

| 方向 | 动画 |
|------|------|
| 右侧 | 从右滑入 |
| 左侧 | 从左滑入 |
| 底部 | 从下滑入 |
| 时长 | 250-300ms |

## 弹出层（Popover）

### 用途

附着在触发元素附近的小型浮层。

### 规范

| 元素 | 规范 |
|------|------|
| 最小宽度 | 200px |
| 最大宽度 | 400px |
| 内边距 | 12-16px |
| 圆角 | 8px |
| 阴影 | shadow-lg |
| 箭头 | 8px，可选 |

### 位置

| 位置 | 描述 |
|------|------|
| top | 上方居中 |
| bottom | 下方居中 |
| left | 左侧居中 |
| right | 右侧居中 |
| 自动 | 根据空间自动调整 |

## 工具提示（Tooltip）

### 用途

鼠标悬停时显示的简短说明。

### 规范

| 元素 | 规范 |
|------|------|
| 背景 | Gray-900 |
| 文字 | White，12-14px |
| 内边距 | 6px 10px |
| 圆角 | 4px |
| 最大宽度 | 250px |
| 延迟显示 | 300-500ms |

### 位置

优先级：top > bottom > right > left

## 下拉菜单（Dropdown）

### 规范

| 元素 | 规范 |
|------|------|
| 最小宽度 | 160px |
| 最大宽度 | 320px |
| 最大高度 | 300px（可滚动） |
| 选项高度 | 36-40px |
| 内边距 | 4-8px |
| 阴影 | shadow-lg |
| 圆角 | 8px |

### 选项状态

| 状态 | 背景 |
|------|------|
| 默认 | 透明 |
| 悬停 | Gray-100 |
| 选中 | Primary-50 |
| 禁用 | 透明，文字灰色 |

## 操作面板（Action Sheet）

### 仅移动端

从底部滑出的操作选项列表。

### 规范

| 元素 | 规范 |
|------|------|
| 圆角 | 顶部 16px |
| 选项高度 | 56px |
| 取消按钮 | 独立分组 |
| 危险操作 | 红色文字 |

## 平台差异

### 网页端
- 模态框居中显示
- 支持 ESC 键关闭
- 点击遮罩可关闭
- 焦点陷阱（Focus Trap）

### 移动端
- 优先使用底部抽屉
- 操作面板替代下拉菜单
- 支持手势关闭（下滑）
- 考虑安全区域

### 桌面端
- 可使用更大尺寸
- 支持拖拽移动
- 可调整大小
- 多窗口管理

## 无障碍考虑

- 模态框使用 `role="dialog"`
- 设置 `aria-modal="true"`
- 提供 `aria-labelledby` 标题
- 实现焦点陷阱
- ESC 键关闭
- 关闭后焦点返回触发元素

## 最佳实践

### ✅ 推荐
- 提供明确的关闭按钮
- 支持多种关闭方式
- 打开时禁止背景滚动
- 使用适当的动画过渡

### ❌ 避免
- 嵌套多层模态框
- 模态框内容过多需滚动
- 无法关闭的弹窗
- 过度使用弹窗打断流程

## 相关规范

- [阴影与层级](规范_01_设计基础_阴影与层级.md)
- [动效规范](规范_03_交互模式_动效规范.md)

---

[返回主目录](README.md)