# 交互无障碍

## 概述

交互无障碍确保所有用户都能操作界面，无论使用何种输入设备。本规范涵盖键盘操作、触控交互、焦点管理和辅助技术支持。

## 设计原则

- **设备无关**：不依赖特定输入设备
- **键盘可达**：所有功能键盘可操作
- **焦点清晰**：焦点位置始终可见
- **操作宽容**：允许错误和撤销

## 键盘操作

### 基本要求

| 要求 | 说明 |
|------|------|
| 完全可操作 | 所有功能可通过键盘完成 |
| 无键盘陷阱 | 焦点可以移出任何区域 |
| 快捷键 | 提供常用操作快捷键 |
| 顺序合理 | Tab 顺序符合视觉顺序 |

### 标准按键

| 按键 | 功能 |
|------|------|
| Tab | 移动到下一个焦点 |
| Shift + Tab | 移动到上一个焦点 |
| Enter | 激活链接/按钮 |
| Space | 激活按钮/复选框 |
| Escape | 关闭弹窗/取消 |
| 方向键 | 列表/菜单导航 |

### 组件键盘模式

| 组件 | 键盘操作 |
|------|----------|
| 按钮 | Enter/Space 激活 |
| 链接 | Enter 激活 |
| 复选框 | Space 切换 |
| 单选框 | 方向键切换 |
| 下拉菜单 | 方向键导航，Enter 选择 |
| 标签页 | 方向键切换 |
| 模态框 | Escape 关闭 |

## 焦点管理

### 焦点顺序

```
正确的焦点顺序：
┌─────────────────────────────────────┐
│  [1. Logo]  [2. 导航]  [3. 搜索]   │
├─────────────────────────────────────┤
│  [4. 侧边栏]                        │
│                                     │
│  [5. 主内容]                        │
│                                     │
│  [6. 表单字段1]                     │
│  [7. 表单字段2]                     │
│  [8. 提交按钮]                      │
└─────────────────────────────────────┘
```

### 焦点陷阱

模态框等覆盖层需要焦点陷阱：

| 要求 | 说明 |
|------|------|
| 打开时 | 焦点移入模态框 |
| 循环 | Tab 在模态框内循环 |
| 关闭时 | 焦点返回触发元素 |

### 跳过导航

```html
<!-- 页面顶部 -->
<a href="#main-content" class="skip-link">
  跳过导航，直接访问主要内容
</a>
```

| 要求 | 说明 |
|------|------|
| 位置 | 页面第一个焦点元素 |
| 可见性 | 聚焦时可见 |
| 目标 | 跳转到主内容区 |

## 触控交互

### 触控目标

| 平台 | 最小尺寸 | 推荐尺寸 |
|------|----------|----------|
| 移动端 | 44×44px | 48×48px |
| 网页端 | 24×24px | 44×44px |

### 触控间距

| 要求 | 值 |
|------|-----|
| 最小间距 | 8px |
| 推荐间距 | 12px |

### 手势替代

| 手势 | 替代方案 |
|------|----------|
| 滑动删除 | 删除按钮 |
| 捏合缩放 | 缩放按钮 |
| 长按 | 菜单按钮 |
| 双击 | 单击替代 |

## 时间限制

### 可调整时间

| 场景 | 要求 |
|------|------|
| 会话超时 | 提前警告，可延长 |
| 自动刷新 | 可暂停/停止 |
| 限时操作 | 可延长或关闭 |

### 自动内容

| 类型 | 要求 |
|------|------|
| 轮播 | 可暂停 |
| 自动播放视频 | 可停止 |
| 动态更新 | 可暂停 |

## 表单无障碍

### 标签关联

```html
<!-- 正确 -->
<label for="email">邮箱地址</label>
<input type="email" id="email" name="email">

<!-- 或者 -->
<label>
  邮箱地址
  <input type="email" name="email">
</label>
```

### 错误处理

| 要求 | 实现 |
|------|------|
| 错误识别 | 明确指出错误字段 |
| 错误描述 | 说明错误原因 |
| 错误建议 | 提供修正建议 |
| 焦点移动 | 可选移至第一个错误 |

### 必填字段

```html
<label for="name">
  姓名 <span aria-hidden="true">*</span>
  <span class="sr-only">（必填）</span>
</label>
<input type="text" id="name" required aria-required="true">
```

## ARIA 使用

### 常用属性

| 属性 | 用途 |
|------|------|
| aria-label | 提供标签 |
| aria-labelledby | 引用标签元素 |
| aria-describedby | 引用描述元素 |
| aria-expanded | 展开状态 |
| aria-hidden | 隐藏于辅助技术 |
| aria-live | 动态内容通知 |

### 使用原则

| 原则 | 说明 |
|------|------|
| 优先原生 | 优先使用原生 HTML |
| 正确使用 | 错误的 ARIA 比没有更糟 |
| 完整实现 | 添加 ARIA 需实现对应行为 |

## 屏幕阅读器

### 测试工具

| 平台 | 工具 |
|------|------|
| macOS/iOS | VoiceOver |
| Windows | NVDA, JAWS |
| Android | TalkBack |

### 阅读顺序

- 遵循 DOM 顺序
- 使用语义化标签
- 合理使用标题层级
- 提供地标区域

## 平台差异

### 网页端
- 完整键盘支持
- 屏幕阅读器兼容
- 浏览器辅助功能

### 移动端
- VoiceOver/TalkBack 支持
- 触控替代方案
- 系统辅助功能集成

### 桌面端
- 系统辅助技术支持
- 快捷键支持
- 高对比度模式

## 最佳实践

### ✅ 推荐
- 使用语义化 HTML
- 测试键盘操作
- 测试屏幕阅读器
- 提供替代交互方式

### ❌ 避免
- 仅支持鼠标操作
- 移除焦点样式
- 使用非标准控件无 ARIA
- 忽视触控目标大小

## 相关规范

- [手势与动作](规范_03_交互模式_手势与动作.md)
- [表单元素](规范_02_组件规范_表单元素.md)

---

[返回主目录](README.md)