# 字体排版

## 概述

字体排版（Typography）是界面设计的核心要素，直接影响内容的可读性和信息层次的传达。本规范定义了字体家族、字号层级、行高、字距等排版规则。

## 设计原则

- **可读性优先**：确保各尺寸下文字清晰可读
- **层次分明**：通过字号、字重区分信息层级
- **克制使用**：限制字体变体数量
- **品牌统一**：使用 MiSans 作为主字体，确保跨平台视觉一致性

## 主字体：MiSans

### 字体简介

MiSans 是小米公司推出的免费开源字体，具有以下特点：

- **可变字重**：提供 10 档字重，满足不同场景需求
- **中英兼备**：完美支持中文与西文混排
- **清晰锐利**：针对屏幕显示优化，小字号依然清晰
- **免费商用**：遵循 SIL Open Font License，可免费商业使用

### 字体家族

#### 主字体栈（推荐）
```css
font-family: "MiSans", -apple-system, BlinkMacSystemFont,
  "PingFang SC", "Hiragino Sans GB", "Microsoft YaHei",
  "Noto Sans SC", sans-serif;
```

#### 等宽字体（代码示例）
```css
font-family: "SF Mono", "Fira Code", "Consolas",
  "Monaco", "Courier New", monospace;
```

### @font-face 声明

```css
/* MiSans 字体引入 */
@font-face {
  font-family: "MiSans";
  src: url("./fonts/MiSans-Regular.ttf") format("truetype");
  font-weight: 400;
  font-style: normal;
  font-display: swap;
}

@font-face {
  font-family: "MiSans";
  src: url("./fonts/MiSans-Medium.ttf") format("truetype");
  font-weight: 500;
  font-style: normal;
  font-display: swap;
}

@font-face {
  font-family: "MiSans";
  src: url("./fonts/MiSans-Semibold.ttf") format("truetype");
  font-weight: 600;
  font-style: normal;
  font-display: swap;
}

@font-face {
  font-family: "MiSans";
  src: url("./fonts/MiSans-Bold.ttf") format("truetype");
  font-weight: 700;
  font-style: normal;
  font-display: swap;
}

/* 可选：完整字重支持 */
@font-face {
  font-family: "MiSans";
  src: url("./fonts/MiSans-Thin.ttf") format("truetype");
  font-weight: 100;
  font-style: normal;
  font-display: swap;
}

@font-face {
  font-family: "MiSans";
  src: url("./fonts/MiSans-ExtraLight.ttf") format("truetype");
  font-weight: 200;
  font-style: normal;
  font-display: swap;
}

@font-face {
  font-family: "MiSans";
  src: url("./fonts/MiSans-Light.ttf") format("truetype");
  font-weight: 300;
  font-style: normal;
  font-display: swap;
}

@font-face {
  font-family: "MiSans";
  src: url("./fonts/MiSans-Heavy.ttf") format("truetype");
  font-weight: 800;
  font-style: normal;
  font-display: swap;
}
```

### 后备字体说明

| 字体 | 适用平台 | 说明 |
|------|----------|------|
| MiSans | 全平台 | 主字体，需引入字体文件 |
| -apple-system | macOS/iOS | Apple 系统字体 |
| BlinkMacSystemFont | Chrome/macOS | Chrome 浏览器系统字体 |
| PingFang SC | macOS/iOS | Apple 中文字体 |
| Hiragino Sans GB | macOS | 冬青黑体 |
| Microsoft YaHei | Windows | 微软雅黑 |
| Noto Sans SC | Android/Linux | Google 思源黑体 |

## 字号系统

### 字号层级

| Token | 字号 | 行高 | 字重 | 用途 |
|-------|------|------|------|------|
| `text-xs` | 12px | 16px | 400 | 辅助说明、标签 |
| `text-sm` | 14px | 20px | 400 | 次级文本、表单标签 |
| `text-base` | 16px | 24px | 400 | **正文基准** |
| `text-lg` | 18px | 28px | 400 | 强调正文 |
| `text-xl` | 20px | 28px | 500 | 小标题 |
| `text-2xl` | 24px | 32px | 600 | 三级标题 |
| `text-3xl` | 30px | 36px | 600 | 二级标题 |
| `text-4xl` | 36px | 40px | 700 | 一级标题 |
| `text-5xl` | 48px | 48px | 700 | 页面主标题 |
| `text-6xl` | 64px | 64px | 800 | 超大展示 |

### 响应式字号

| 元素 | 移动端 | 平板 | 桌面 |
|------|--------|------|------|
| H1 | 30px | 36px | 48px |
| H2 | 24px | 30px | 36px |
| H3 | 20px | 24px | 30px |
| 正文 | 16px | 16px | 16px |
| 辅助 | 14px | 14px | 14px |

## 字重

### MiSans 可用字重

MiSans 提供 10 档字重，完整覆盖设计需求：

| 字体文件 | 字重值 | 字重名称 | 推荐使用场景 |
|---------|--------|----------|-------------|
| MiSans-Thin | 100 | Thin | 装饰性大标题、品牌展示 |
| MiSans-ExtraLight | 200 | Extra Light | 大尺寸辅助文字 |
| MiSans-Light | 300 | Light | 长文阅读、沉浸内容 |
| MiSans-Normal | 350 | Normal | 特定场景过渡字重 |
| MiSans-Regular | **400** | Regular | **正文基准** |
| MiSans-Medium | **500** | Medium | **强调文本、按钮** |
| MiSans-Demibold | 550 | Demibold | 过渡字重 |
| MiSans-Semibold | **600** | Semibold | **小标题、导航** |
| MiSans-Bold | **700** | Bold | **标题** |
| MiSans-Heavy | 800 | Heavy | 超大展示标题 |

### 推荐字重系统

日常使用建议采用以下 5 档核心字重：

| Token | 字重值 | MiSans 文件 | 用途 | 使用场景示例 |
|-------|--------|-------------|------|-------------|
| `font-normal` | 400 | Regular | 正文 | 段落文本、列表项、表格内容 |
| `font-medium` | 500 | Medium | 强调 | 按钮文字、表单标签、链接 |
| `font-semibold` | 600 | Semibold | 小标题 | 卡片标题、导航项、侧边栏 |
| `font-bold` | 700 | Bold | 标题 | H1-H4 标题、页面主标题 |
| `font-heavy` | 800 | Heavy | 超大展示 | Hero 区域、品牌展示、数据大屏 |

### 扩展字重（可选）

适用于特殊设计场景：

| Token | 字重值 | MiSans 文件 | 用途 |
|-------|--------|-------------|------|
| `font-thin` | 100 | Thin | 装饰性超大标题 |
| `font-extralight` | 200 | ExtraLight | 淡雅风格设计 |
| `font-light` | 300 | Light | 长文阅读、杂志风格 |

> ⚠️ **注意**：细体字重（100-300）在小字号下可读性较差，建议仅用于 24px 以上的大字号场景。

## 行高

### 行高比例

| 类型 | 行高倍数 | 适用场景 |
|------|----------|----------|
| 紧凑 | 1.25 | 标题、按钮 |
| 标准 | 1.5 | 正文段落 |
| 宽松 | 1.75 | 长文阅读 |

### 固定行高

| Token | 值 | 说明 |
|-------|-----|------|
| `leading-none` | 1 | 无额外行高 |
| `leading-tight` | 1.25 | 紧凑 |
| `leading-normal` | 1.5 | 标准 |
| `leading-relaxed` | 1.75 | 宽松 |
| `leading-loose` | 2 | 特宽 |

## 字间距

| Token | 值 | 用途 |
|-------|-----|------|
| `tracking-tighter` | -0.05em | 大标题 |
| `tracking-tight` | -0.025em | 中标题 |
| `tracking-normal` | 0 | 正文 |
| `tracking-wide` | 0.025em | 小号全大写 |
| `tracking-wider` | 0.05em | 标签、徽章 |

## 段落样式

### 段落间距

| 场景 | 值 |
|------|-----|
| 段落间距 | 16px (1em) |
| 标题与正文 | 8px (0.5em) |
| 列表项间距 | 8px |

### 文本对齐

| 对齐方式 | 使用场景 |
|----------|----------|
| 左对齐 | 正文、表单（默认） |
| 居中 | 标题、空状态 |
| 右对齐 | 数字、价格 |
| 两端对齐 | 避免使用（会产生不均匀间距） |

## 平台差异

### 网页端
- 使用 `rem` 单位便于整体缩放
- 基准字号：`html { font-size: 16px; }`
- 考虑浏览器最小字号限制（通常 12px）
- 使用 `font-display: swap` 避免字体加载阻塞

### 移动端
- iOS：通过 `@font-face` 引入 MiSans
- Android：通过 `@font-face` 引入 MiSans
- 考虑字体文件大小对加载速度的影响
- 可使用字体子集化减少文件体积

### 桌面端
- 可使用更多字号层级
- 考虑高 DPI 显示器渲染
- Electron 应用可内嵌 MiSans 字体

## 字体加载优化

### 加载策略

| 策略 | 说明 | 适用场景 |
|------|------|----------|
| `font-display: swap` | 先用后备字体，加载完成后切换 | 推荐默认 |
| `font-display: optional` | 网络慢时不加载自定义字体 | 性能优先 |
| 预加载 | `<link rel="preload">` 提前加载 | 首屏关键字体 |
| 子集化 | 仅保留使用的字符 | 减少文件体积 |

### 预加载示例

```html
<link rel="preload" href="/fonts/MiSans-Regular.woff2" as="font" type="font/woff2" crossorigin>
<link rel="preload" href="/fonts/MiSans-Medium.woff2" as="font" type="font/woff2" crossorigin>
```

## 无障碍考虑

- 正文最小 16px，辅助文字最小 12px
- 行高至少 1.5 倍
- 避免全大写长文本（影响可读性）
- 支持用户放大字号至 200%
- 段落宽度不超过 80 字符
- MiSans 细体字重（100-300）仅用于 24px 以上场景

## 最佳实践

### ✅ 推荐
- 优先使用 MiSans 确保视觉一致性
- 限制页面使用的字重变体（推荐 4-5 种）
- 标题使用 Bold (700)，正文使用 Regular (400)
- 按钮和强调文本使用 Medium (500)
- 使用 WOFF2 格式以获得最佳压缩率
- 实施字体预加载策略

### ❌ 避免
- 在正文中使用过细的字重（< 400）
- 小字号（< 24px）使用 Thin/ExtraLight/Light 字重
- 过窄或过宽的行宽
- 同时加载过多字重变体（影响性能）
- 忽略后备字体栈配置

## 使用示例

本规范提供了完整的示例文件，帮助你快速在项目中使用 MiSans 字体。

### 示例文件位置

| 文件 | 路径 | 说明 |
|------|------|------|
| 字体展示页面 | [`examples/font-demo.html`](./examples/font-demo.html) | 展示所有 10 档字重的视觉效果 |
| CSS 样式表 | [`examples/font-demo.css`](./examples/font-demo.css) | 完整的 @font-face 声明和工具类 |
| 使用说明 | [`examples/README.md`](examples/README.md) | 详细的使用指南 |

### 快速开始（Quick Start）

#### 1. 准备字体文件

将 MiSans 字体文件放置到项目的 `fonts` 目录。建议将 TTF 转换为 WOFF2 格式：

```
your-project/
├── fonts/
│   ├── MiSans-Regular.woff2
│   ├── MiSans-Medium.woff2
│   ├── MiSans-Semibold.woff2
│   ├── MiSans-Bold.woff2
│   └── ...
├── css/
│   └── fonts.css
└── index.html
```

#### 2. 引入样式和预加载

```html
<head>
  <!-- 预加载关键字重（推荐） -->
  <link rel="preload" href="/fonts/MiSans-Regular.woff2" as="font" type="font/woff2" crossorigin>
  <link rel="preload" href="/fonts/MiSans-Medium.woff2" as="font" type="font/woff2" crossorigin>

  <!-- 引入字体样式 -->
  <link rel="stylesheet" href="/css/fonts.css">
</head>
```

#### 3. 使用字体

```css
/* 方式一：使用 CSS 变量（推荐） */
body {
  font-family: var(--font-sans);
  font-weight: var(--font-normal);
}

h1 {
  font-weight: var(--font-bold);
}

button {
  font-weight: var(--font-medium);
}
```

```html
<!-- 方式二：使用工具类 -->
<h1 class="font-bold">标题文字</h1>
<p class="font-normal">正文内容</p>
<button class="font-medium">按钮文字</button>
```

### 字体文件部署路径

推荐的目录结构：

| 环境 | 字体路径 | CSS 引用路径 |
|------|----------|-------------|
| 开发环境 | `/public/fonts/` | `url("/fonts/MiSans-Regular.woff2")` |
| 生产环境 | `/assets/fonts/` | `url("/assets/fonts/MiSans-Regular.woff2")` |
| CDN 部署 | `https://cdn.example.com/fonts/` | `url("https://cdn.example.com/fonts/...")` |

### 常见框架集成

#### React / Next.js

```jsx
// next.config.js 或 CSS 文件中引入
import './fonts.css';

// 组件中使用
<h1 style={{ fontWeight: 700 }}>标题</h1>
<p className="font-normal">正文</p>
```

#### Vue

```vue
<style>
@import './fonts.css';

.title {
  font-family: var(--font-sans);
  font-weight: 700;
}
</style>
```

#### Tailwind CSS

```js
// tailwind.config.js
module.exports = {
  theme: {
    fontFamily: {
      sans: ['MiSans', '-apple-system', 'BlinkMacSystemFont', 'PingFang SC', 'sans-serif'],
    },
  },
}
```

## 相关规范

### 设计规范
- [间距与尺寸](规范_01_设计基础_间距与尺寸.md)
- [无障碍设计原则](规范_05_无障碍访问_无障碍设计原则.md)

### 字体资源
- [字体使用示例](examples/README.md) - 代码示例和演示页面
- [字体格式转换指南](fonts/README.md) - TTF → WOFF2 转换方法
- [字体优化指南](fonts/OPTIMIZATION.md) - 子集化、加载优化、降级方案
- [字体兼容性说明](fonts/COMPATIBILITY.md) - 浏览器和设备兼容性
- [字体许可证说明](fonts/LICENSE.md) - MiSans SIL OFL 许可证
- [字体实施检查清单](fonts/CHECKLIST.md) - 部署前完整检查

---

[返回主目录](README.md)