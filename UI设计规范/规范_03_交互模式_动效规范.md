# 动效规范

## 概述

动效（Motion）是界面设计的重要组成部分。恰当的动效能够引导注意力、传达状态变化、增强空间感知、提升整体体验品质。

## 设计原则

- **有目的**：每个动效都有明确目的
- **自然流畅**：符合物理世界规律
- **快速响应**：不阻碍用户操作
- **一致性**：相同场景相同动效

## 动效目的

| 目的 | 描述 | 示例 |
|------|------|------|
| 反馈 | 确认用户操作 | 按钮点击效果 |
| 引导 | 引导用户注意力 | 新功能提示 |
| 过渡 | 连接状态变化 | 页面切换 |
| 装饰 | 增强视觉体验 | 加载动画 |

## 时长规范

### 基础时长

| Token | 时长 | 用途 |
|-------|------|------|
| `duration-75` | 75ms | 微交互 |
| `duration-100` | 100ms | 快速反馈 |
| `duration-150` | 150ms | 按钮状态 |
| `duration-200` | 200ms | **标准过渡** |
| `duration-300` | 300ms | 展开/收起 |
| `duration-500` | 500ms | 页面过渡 |
| `duration-700` | 700ms | 复杂动画 |
| `duration-1000` | 1000ms | 强调动画 |

### 时长选择

| 场景 | 推荐时长 |
|------|----------|
| 悬停效果 | 100-150ms |
| 按钮状态 | 150-200ms |
| 下拉展开 | 200-300ms |
| 模态框 | 200-300ms |
| 页面切换 | 300-500ms |
| 复杂动画 | 500-1000ms |

## 缓动函数

### 标准缓动

| 名称 | 曲线 | 用途 |
|------|------|------|
| ease | cubic-bezier(0.25, 0.1, 0.25, 1) | 通用 |
| ease-in | cubic-bezier(0.42, 0, 1, 1) | 退出 |
| ease-out | cubic-bezier(0, 0, 0.58, 1) | 进入 |
| ease-in-out | cubic-bezier(0.42, 0, 0.58, 1) | 状态变化 |
| linear | cubic-bezier(0, 0, 1, 1) | 匀速 |

### 自定义缓动

| 名称 | 曲线 | 用途 |
|------|------|------|
| 弹性 | cubic-bezier(0.68, -0.55, 0.27, 1.55) | 弹跳效果 |
| 强调 | cubic-bezier(0.34, 1.56, 0.64, 1) | 吸引注意 |
| 平滑 | cubic-bezier(0.4, 0, 0.2, 1) | Material 风格 |

### 缓动选择

| 场景 | 推荐缓动 |
|------|----------|
| 进入 | ease-out |
| 退出 | ease-in |
| 状态变化 | ease-in-out |
| 弹窗出现 | ease-out 或弹性 |
| 持续动画 | linear |

## 常见动效

### 淡入淡出

```css
/* 淡入 */
opacity: 0 → 1
duration: 200ms
easing: ease-out

/* 淡出 */
opacity: 1 → 0
duration: 150ms
easing: ease-in
```

### 缩放

```css
/* 放大进入 */
transform: scale(0.95) → scale(1)
opacity: 0 → 1
duration: 200ms

/* 缩小退出 */
transform: scale(1) → scale(0.95)
opacity: 1 → 0
duration: 150ms
```

### 滑动

```css
/* 从右滑入 */
transform: translateX(100%) → translateX(0)
duration: 300ms
easing: ease-out

/* 从下滑入 */
transform: translateY(20px) → translateY(0)
opacity: 0 → 1
duration: 250ms
```

### 展开收起

```css
/* 展开 */
height: 0 → auto
opacity: 0 → 1
duration: 300ms
easing: ease-out

/* 收起 */
height: auto → 0
opacity: 1 → 0
duration: 200ms
easing: ease-in
```

## 组件动效

| 组件 | 动效 | 时长 |
|------|------|------|
| 按钮悬停 | 背景色过渡 | 150ms |
| 下拉菜单 | 淡入+下滑 | 200ms |
| 模态框 | 淡入+缩放 | 250ms |
| 抽屉 | 滑入 | 300ms |
| Toast | 淡入+上滑 | 200ms |
| 开关 | 滑块移动 | 200ms |
| 折叠面板 | 高度展开 | 300ms |

## 页面过渡

| 类型 | 动效 | 时长 |
|------|------|------|
| 前进 | 新页面从右滑入 | 300ms |
| 后退 | 当前页面向右滑出 | 300ms |
| 替换 | 淡入淡出 | 200ms |
| 模态 | 从下滑入 | 300ms |

## 加载动效

### 旋转器

```css
animation: spin 1s linear infinite;

@keyframes spin {
  from { transform: rotate(0deg); }
  to { transform: rotate(360deg); }
}
```

### 骨架屏光泽

```css
animation: shimmer 1.5s infinite;

@keyframes shimmer {
  0% { background-position: -200% 0; }
  100% { background-position: 200% 0; }
}
```

## 性能优化

### 优化属性

| 推荐 | 避免 |
|------|------|
| transform | width/height |
| opacity | margin/padding |
| filter | top/left |

### 优化技巧

- 使用 `will-change` 提示
- 避免同时动画过多元素
- 使用 GPU 加速属性
- 减少重排重绘

## 平台差异

### 网页端
- CSS Transitions/Animations
- Web Animations API
- 考虑低性能设备

### 移动端
- 原生动画性能更好
- 60fps 流畅标准
- 减少复杂动效

### 桌面端
- 可使用更丰富动效
- 支持更长时长
- 窗口动画

## 无障碍考虑

- 尊重 `prefers-reduced-motion`
- 提供关闭动效选项
- 避免闪烁效果
- 不依赖动效传达信息

```css
@media (prefers-reduced-motion: reduce) {
  * {
    animation-duration: 0.01ms !important;
    transition-duration: 0.01ms !important;
  }
}
```

## 最佳实践

### ✅ 推荐
- 动效有明确目的
- 保持简洁快速
- 使用标准缓动
- 考虑性能影响

### ❌ 避免
- 过度使用动效
- 动效时间过长
- 阻塞用户操作
- 忽视无障碍需求

## 相关规范

- [手势与动作](规范_03_交互模式_手势与动作.md)
- [弹窗与覆盖层](规范_02_组件规范_弹窗与覆盖层.md)

---

[返回主目录](README.md)