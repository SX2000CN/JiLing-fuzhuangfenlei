# 服装分类系统 - 新版UI使用说明

## 🚀 快速启动

### 方法一：命令行运行（推荐）
```bash
# 在项目根目录执行
python run_new_gui.py
```

### 方法二：直接运行测试
```bash
python src/gui/test_new_ui.py
```

## 📱 界面功能概览

### 主窗口布局
```
┌─────────────────────────────────────────────────────────┐
│  🧵 服装分类系统 v2.0  [最小化] [最大化] [关闭]          │
├──────────┬──────────────────────────────────────────────┤
│  📊 训练 │  训练参数设置          │  训练监控            │
│  🎯 分类 │  ┌──────────────────┐  │  ┌────────────────┐ │
│  ⚙️ 设置 │  │ 模型配置         │  │  训练进度       │ │
│          │  │ - 模型类型       │  │  [████░░░░░] 50%│ │
│          │  │ - 预训练模型     │  │  状态: 训练中...│ │
│          │  └──────────────────┘  │                    │ │
│          │  ┌──────────────────┐  │  训练指标          │ │
│          │  │ 数据配置         │  │  ┌──────────────┐ │ │
│          │  │ - 数据路径       │  │  │轮次│损失│准确率│ │ │
│          │  │ - 批次大小       │  │  │ 1  │0.52│ 78% │ │ │
│          │  │ - 数据增强       │  │  │ 2  │0.41│ 83% │ │ │
│          │  └──────────────────┘  │  └──────────────┘ │ │
│          │  ┌──────────────────┐  │                    │ │
│          │  │ 训练配置         │  │  训练日志          │ │
│          │  │ - 学习率         │  │  [INFO] 开始训练...│ │
│          │  │ - 训练轮次       │  │  [SUCCESS] 模型加载│ │
│          │  │ - 验证比例       │  │  [WARNING] 数据不足│ │
│          │  │ - 早停策略       │  │  [ERROR] 训练中断  │ │
│          │  └──────────────────┘  │                    │ │
│          │  [开始训练] [停止]      │                    │ │
└──────────┴──────────────────────────────────────────────┘
```

## 🎯 核心功能

### 1. 训练页面
**参数设置：**
- **模型配置**：选择模型类型（ResNet50/101等）、预训练模型路径
- **数据配置**：选择数据集文件夹、设置批次大小、启用数据增强
- **训练配置**：调整学习率、训练轮次、验证比例、早停策略

**实时监控：**
- **进度条**：显示当前训练进度和轮次信息
- **指标表格**：实时显示损失、准确率等关键指标
- **日志终端**：彩色日志输出，支持不同级别（INFO/SUCCESS/WARNING/ERROR）

### 2. 分类页面
**模型加载：**
- 选择训练好的模型文件（.pth/.pt）
- 显示模型加载状态

**批量分类：**
- 选择包含图片的文件夹
- 自动统计图片数量
- 批量处理并显示结果

**结果展示：**
- 表格显示：文件名、预测类别、置信度
- 支持按置信度排序
- 显示处理进度

## 🎨 设计特性

### 视觉设计
- **深色主题**：专业护眼的深色配色方案
- **无边框窗口**：现代化的自定义标题栏
- **圆角卡片**：柔和的视觉层次
- **统一间距**：基于4px网格的规范布局

### 交互体验
- **悬停反馈**：按钮和控件的悬停效果
- **焦点环**：键盘导航时的焦点指示
- **状态指示**：清晰的操作状态反馈
- **彩色日志**：不同级别的日志使用不同颜色

### 组件规范
- **按钮**：主要、次要、危险、文本、操作按钮
- **输入框**：文本、数字、滑块、下拉框、文件选择
- **卡片**：基础、参数、分区、状态卡片
- **表格**：训练指标、分类结果表格
- **其他**：进度条、终端、标签页、徽章

## 🔧 技术特点

### 架构设计
```
src/gui/
├── styles/          # 设计系统
│   ├── colors.py    # 颜色规范
│   ├── typography.py # 字体规范
│   ├── spacing.py   # 间距规范
│   └── theme.py     # 主题管理器
├── components/      # 规范化组件
│   ├── buttons.py   # 按钮组件
│   ├── inputs.py    # 输入组件
│   ├── cards.py     # 卡片容器
│   ├── tables.py    # 表格组件
│   └── others.py    # 其他组件
├── pages/           # 页面模块
│   ├── training_page.py    # 训练页面
│   ├── classification_page.py # 分类页面
│   └── __init__.py
├── components/      # 组件库
├── new_main_window.py      # 主窗口
└── test_new_ui.py          # 测试启动器
```

### 信号机制
- UI与业务逻辑完全解耦
- 使用PySide6信号槽机制
- 易于集成现有业务代码

### 样式管理
- 统一的样式生成器
- 支持动态主题切换
- 避免硬编码样式

## 📋 使用流程

### 训练模型
1. 切换到"训练"标签页
2. 配置模型参数（模型类型、预训练模型）
3. 选择数据集路径
4. 调整训练配置（学习率、轮次等）
5. 点击"开始训练"按钮
6. 监控训练进度和指标变化
7. 查看日志了解详细信息

### 批量分类
1. 切换到"分类"标签页
2. 点击"加载模型"选择训练好的模型
3. 点击"选择图片"选择图片文件夹
4. 点击"开始分类"执行批量分类
5. 查看分类结果表格
6. 可以导出或保存结果

## ⚠️ 注意事项

### 系统要求
- Python 3.7+
- PySide6
- Windows 10/11 (推荐)

### 文件路径
- 确保路径不包含中文或特殊字符
- 建议使用英文路径
- 检查文件读写权限

### 性能建议
- 大批量分类时建议分批处理
- 训练时监控GPU内存使用
- 日志过多时会自动清理旧记录

## 🆘 常见问题

**Q: 界面无法启动？**
A: 检查是否安装了PySide6，运行 `pip install PySide6`

**Q: 按钮点击无反应？**
A: 这是测试版本，需要连接实际的业务逻辑代码

**Q: 样式显示异常？**
A: 确保使用支持的字体（MiSans），或修改字体配置

**Q: 如何修改主题颜色？**
A: 编辑 `src/gui/styles/colors.py` 中的颜色定义

## 🔗 下一步

1. **集成业务逻辑**：将现有的训练和分类代码连接到新界面
2. **添加响应式适配**：优化不同窗口尺寸的显示
3. **完善错误处理**：增加更多的异常捕获和用户提示
4. **添加单元测试**：为组件和页面编写测试用例
5. **国际化支持**：添加多语言支持

---

**版本信息**：v2.0 - 基于前端设计规范重构  
**更新日期**：2025-12-19
