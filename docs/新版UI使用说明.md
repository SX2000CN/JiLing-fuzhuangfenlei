# 服装分类系统 - 新版UI使用说明

## 快速启动

### 方法一：命令行运行（推荐）
```bash
# 在项目根目录执行
python run_new_gui.py
```

### 方法二：使用启动脚本
```bash
# Windows
launchers\启动-新界面.bat
```

### 方法三：使用菜单启动器

```bash
# Windows - 提供菜单选择
start.bat
```

## 界面功能概览

### 主窗口布局
```
┌─────────────────────────────────────────────────────────┐
│  服装分类系统 v2.0        [最小化] [最大化] [关闭]       │
├──────────┬──────────────────────────────────────────────┤
│  训练    │  训练参数设置          │  训练监控            │
│  分类    │  ┌──────────────────┐  │  ┌────────────────┐ │
│  设置    │  │ 模型配置         │  │  │ 训练进度       │ │
│          │  │ - 模型类型       │  │  │ [████░░░░░] 50%│ │
│          │  │ - 预训练模型     │  │  │ 状态: 训练中...│ │
│          │  └──────────────────┘  │  └────────────────┘ │
│          │  ┌──────────────────┐  │                     │
│          │  │ 数据配置         │  │  训练日志           │
│          │  │ - 数据路径       │  │  [INFO] 开始训练... │
│          │  │ - 批次大小       │  │  [SUCCESS] 模型加载 │
│          │  └──────────────────┘  │                     │
│          │  [开始训练] [停止]      │                     │
└──────────┴──────────────────────────────────────────────┘
```

## 核心功能

### 1. 训练页面

**参数设置：**

- **模型配置**：选择模型类型（EfficientNetV2、ConvNeXt、ResNet等）、预训练模型路径
- **数据配置**：选择数据集文件夹、设置批次大小、启用数据增强
- **训练配置**：调整学习率、训练轮次、验证比例、早停策略

**实时监控：**

- **进度条**：显示当前训练进度和轮次信息
- **日志终端**：彩色日志输出，支持不同级别（INFO/SUCCESS/WARNING/ERROR）

### 2. 分类页面

**模型加载：**

- 选择训练好的模型文件（.pth/.pt）
- 显示模型加载状态

**批量分类：**

- 选择包含图片的文件夹
- 自动统计图片数量
- 批量处理并显示结果

**结果展示：**

- 表格显示：文件名、预测类别、置信度
- 支持按置信度排序
- 显示处理进度

### 3. 设置页面

- **外观设置**：主题切换（深色/浅色/跟随系统）、界面缩放
- **模型设置**：推理设备、推理精度、置信度阈值
- **路径配置**：模型目录、数据集目录、日志目录、导出目录
- **性能设置**：数据加载线程、批处理上限、混合精度训练
- **训练默认值**：默认训练轮数、早停耐心值、检查点保存间隔

## 设计特性

### 视觉设计

- **深色/浅色主题**：支持主题切换，跟随系统设置
- **无边框窗口**：现代化的自定义标题栏，圆角窗口
- **VS Code 风格**：简洁的侧边栏导航

### 交互体验

- **悬停反馈**：按钮和控件的悬停效果
- **状态指示**：清晰的操作状态反馈
- **彩色日志**：不同级别的日志使用不同颜色

## 技术架构

```
src/gui/
├── app.py              # 模块化入口
├── native_ui.py        # VS Code 风格界面实现
├── main_window.py      # 传统界面实现
├── components/         # 可复用 UI 组件库
│   ├── buttons.py      # 按钮组件
│   ├── inputs.py       # 输入组件（滑块、下拉框、文件选择）
│   ├── cards.py        # 卡片容器
│   ├── settings.py     # 设置行组件
│   ├── terminal.py     # 终端组件
│   └── window_controls.py  # 窗口控制按钮
├── pages/              # 页面级组件
│   ├── training.py     # 训练页面
│   ├── classification.py   # 分类页面
│   └── settings.py     # 设置页面
├── theme/              # 主题管理系统
│   ├── manager.py      # 主题管理器（单例）
│   ├── dark.py         # 深色主题配置
│   ├── light.py        # 浅色主题配置
│   ├── styles.py       # 样式生成
│   └── tokens.py       # 颜色令牌定义
├── widgets/            # 自定义控件
│   ├── gpu_status.py   # GPU 状态显示
│   └── result_table.py # 结果表格
├── workers/            # 后台工作线程
│   ├── classification.py   # 分类任务线程
│   └── training.py     # 训练任务线程
└── utils/              # 工具函数
    ├── constants.py    # 常量定义
    ├── fonts.py        # 字体管理
    └── icons.py        # 图标处理
```

## 使用流程

### 训练模型
1. 切换到"训练"标签页
2. 配置模型参数（模型类型、预训练模型）
3. 选择数据集路径
4. 调整训练配置（学习率、轮次等）
5. 点击"开始训练"按钮
6. 监控训练进度和日志

### 批量分类
1. 切换到"分类"标签页
2. 点击"加载模型"选择训练好的模型
3. 点击"选择图片"选择图片文件夹
4. 点击"开始分类"执行批量分类
5. 查看分类结果表格

## 注意事项

### 系统要求
- Python 3.10+
- PySide6 >= 6.5.0
- Windows 10/11

### 性能建议
- 大批量分类时建议分批处理
- 训练时监控 GPU 内存使用
- 建议使用 GPU 模式以获得最佳性能

## 常见问题

**Q: 界面无法启动？**
A: 检查是否安装了 PySide6，运行 `pip install PySide6`

**Q: 样式显示异常？**
A: 确保 fonts 目录下有 MiSans 字体文件

**Q: 如何切换主题？**
A: 在设置页面的"外观设置"中选择主题

---

**版本信息**：v2.0 - 模块化架构重构
**更新日期**：2025-12-26
